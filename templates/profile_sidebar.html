{% load static %}

<!-- Mobile header (hamburger) -->
<div class="md:hidden fixed top-0 left-0 right-0 bg-white shadow px-4 py-3 flex items-center justify-between z-50">
  <button onclick="toggleSidebar()" class="text-2xl text-gray-700">â˜°</button>
  <h2 class="text-lg font-semibold">My Account</h2>
</div>

<!-- Overlay (mobile) -->
<div id="overlay" onclick="closeSidebar()" class="hidden fixed inset-0 bg-black/50 z-40"></div>

<div class="flex min-h-screen bg-gray-50">
  <!-- Sidebar -->
  <div id="sidebar"
       class="fixed md:static top-0 left-0 w-72 bg-gradient-to-br from-indigo-500 to-purple-700 text-white p-4 flex flex-col z-50 transform -translate-x-full md:translate-x-0 transition-transform duration-300">

    <!-- Profile section -->
    <div class="text-center border-b border-white/20 pb-6">
      <div class="flex justify-center">
        {% if user_profile.profile_image %}
          <img src="{{ user_profile.profile_image.url }}" alt="Profile"
               class="w-20 h-20 rounded-full border-4 border-white/30 shadow-md object-cover" />
        {% else %}
          <img src="{% static 'assets/default_profile.png' %}" alt="Profile"
               class="w-20 h-20 rounded-full border-4 border-white/30 shadow-md object-cover" />
        {% endif %}
      </div>
      <h3 class="mt-3 text-lg font-semibold">Hello, {{ user.first_name|default:"User" }}</h3>
      <p class="text-sm text-white/80">{{ user.email }}</p>
    </div>

    <!-- Nav links -->
    <nav class="flex-1 py-6 space-y-1">
      <a href="{% url 'profile' request.user.id %}" class="flex items-center gap-3 px-4 py-3 rounded-md hover:bg-white/10">
        <i class="fa-solid fa-user w-5"></i> My Details
      </a>
      <a href="{% url "edit_profile" %}" class="flex items-center gap-3 px-4 py-3 rounded-md hover:bg-white/10">
        <i class="fa-solid fa-pen w-5"></i> Edit Profile
      </a>
      <a href="{% url 'cart' %}" class="flex items-center gap-3 px-4 py-3 rounded-md hover:bg-white/10">
        <i class="fa-solid fa-cart-shopping w-5"></i> My Cart
        <span class="ml-auto bg-white/30 text-xs px-2 py-0.5 rounded-full">{{ cart_items.count }}</span>
      </a>
      <a href="{% url 'wishlist' %}" class="flex items-center gap-3 px-4 py-3 rounded-md hover:bg-white/10">
        <i class="fa-solid fa-heart w-5"></i> My Wishlist
        <span class="ml-auto bg-white/30 text-xs px-2 py-0.5 rounded-full">{{ wishlist.count }}</span>
      </a>
      <a href="{% url 'view_order' %}" class="flex items-center gap-3 px-4 py-3 rounded-md hover:bg-white/10">
        <i class="fa-solid fa-truck w-5"></i> My Orders
        <span class="ml-auto bg-white/30 text-xs px-2 py-0.5 rounded-full">{{ order_item_count }}</span>
      </a>
    </nav>

    <!-- Logout -->
    <form method="POST" action="{% url 'logout' %}" class="mt-auto">
      {% csrf_token %}
      <button type="submit"
              class="flex items-center gap-3 w-full px-4 py-3 bg-white/10 hover:bg-white/20 rounded-md border border-white/20 transition">
        <i class="fa-solid fa-arrow-right-from-bracket w-5"></i> Logout
      </button>
    </form>
  </div>
<script>
function toggleSidebar() {
  document.getElementById("sidebar").classList.toggle("-translate-x-full");
  document.getElementById("overlay").classList.toggle("hidden");
}
function closeSidebar() {
  document.getElementById("sidebar").classList.add("-translate-x-full");
  document.getElementById("overlay").classList.add("hidden");
}
</script>

